# Memory System

How the learning OS remembers your journey.

## Overview

The memory system tracks your learning through append-only files. Claude reads these files to provide context-aware recommendations, but all writes require your explicit approval.

## Memory Files

| File | Purpose | Format |
|------|---------|--------|
| `learner_profile.json` | Goals, constraints, preferences | JSON object |
| `progress_log.jsonl` | Event history | JSON Lines |
| `decisions.jsonl` | Important decisions | JSON Lines |
| `best_practices.md` | Learned patterns | Markdown |

All files live in `.claude/memory/`.

## Human Oversight Requirement

**Critical**: Claude must show proposed memory updates to you and receive explicit approval before writing.

Memory is for record-keeping. It does NOT autonomously modify behavior.

### Example Approval Flow

```
Claude: "I'd like to log this to progress_log.jsonl:

        {
          \"timestamp\": \"2026-01-09T14:00:00Z\",
          \"type\": \"task_complete\",
          \"task\": \"Implemented retrieval function\"
        }

        Approve? (yes/no)"

You: "yes"

Claude: "Added to progress log."
```

## File Details

### learner_profile.json

Your learning context and preferences.

```json
{
  "name": "Your Name",
  "level": "advanced",
  "started": "2026-01-01",
  "current_month": 3,
  "goals": [
    "Build production ML systems",
    "Master Kubernetes"
  ],
  "constraints": {
    "hours_per_week": 15,
    "preferred_days": ["Mon", "Tue", "Wed", "Thu", "Fri"]
  },
  "preferences": {
    "learning_style": "hands-on",
    "feedback_frequency": "weekly"
  }
}
```

**Updates**: Rarely (level changes, goal updates).

### progress_log.jsonl

Append-only log of events. Each line is a JSON object.

```jsonl
{"timestamp": "2026-01-09T10:00:00Z", "type": "week_start", "week": 2}
{"timestamp": "2026-01-09T14:00:00Z", "type": "task_complete", "task": "Setup vector store"}
{"timestamp": "2026-01-09T16:00:00Z", "type": "blocker", "description": "Embedding mismatch"}
{"timestamp": "2026-01-10T11:00:00Z", "type": "blocker_resolved", "description": "Fixed dimensions"}
```

**Event types**:
| Type | When |
|------|------|
| `week_start` | Beginning a week |
| `week_end` | Finishing a week |
| `task_complete` | Task finished |
| `blocker` | Got stuck |
| `blocker_resolved` | Unstuck |
| `milestone` | Major achievement |
| `evaluation` | Formal evaluation |

**Updates**: Frequently (via hooks or manually).

### decisions.jsonl

Important decisions for future reference.

```jsonl
{"timestamp": "2026-01-05T09:00:00Z", "decision": "Use Qdrant", "rationale": "Good Python SDK", "alternatives": ["Pinecone", "FAISS"]}
{"timestamp": "2026-01-08T14:00:00Z", "decision": "500 token chunks", "rationale": "Best retrieval quality in tests"}
```

**Updates**: When making significant choices.

### best_practices.md

Living document of learned patterns.

```markdown
## RAG / Data Processing

### Chunking Strategy Testing
> Always test chunking with real documents before committing
> to a strategy. Use 3 representative documents.
>
> *When*: Starting RAG projects
> *Source*: Month 03 (2026-01)
```

**Updates**: After solving problems, during retrospectives.

## How Memory Informs Recommendations

### Claude Reads Memory

Before making recommendations, Claude reads:
- Profile → understands constraints
- Progress log → knows recent activity
- Decisions → respects past choices
- Best practices → applies patterns

### Context-Aware Suggestions

```
Claude: "Based on your profile (15h/week) and progress log
        (you've been on this task 3 days), I suggest
        breaking it into smaller pieces or seeking help."
```

### Pattern Application

```
Claude: "Your best_practices.md mentions 'test chunking first'.
        Should I help you set up a chunking test before
        committing to an approach?"
```

## Memory vs Tracker

| Aspect | Memory Files | Tracker |
|--------|--------------|---------|
| Location | `.claude/memory/` | `paths/advanced/tracker.md` |
| Purpose | Source of truth | Derived view |
| Updates | Append-only | Regenerated by `report.py` |
| Control | You + Claude (approved) | `report.py` |

**Important**: Memory files are the source of truth. The tracker is derived and may be regenerated.

## Working with Memory

### Viewing Memory

```bash
# View progress log
cat .claude/memory/progress_log.jsonl

# View recent events
tail -10 .claude/memory/progress_log.jsonl

# View profile
cat .claude/memory/learner_profile.json

# View decisions
cat .claude/memory/decisions.jsonl
```

### Manual Updates

You can edit memory directly:

```bash
# Add progress event
echo '{"timestamp": "2026-01-09T12:00:00Z", "type": "note", "content": "Manual note"}' >> .claude/memory/progress_log.jsonl

# Add decision
echo '{"timestamp": "2026-01-09T12:00:00Z", "decision": "X", "rationale": "Y"}' >> .claude/memory/decisions.jsonl

# Edit best practices
# Open .claude/memory/best_practices.md in your editor
```

### Using Commands

```
/add-best-practice "Test with real data first"
```

This prompts Claude to propose an addition, which you approve.

## Automatic Logging (Hooks)

Hooks log events automatically:

```bash
# Logs week_start
bash .claude/hooks/pre_week_start.sh

# Logs week_end
bash .claude/hooks/post_week_review.sh
```

## Best Practices for Memory

1. **Log consistently** - The more data, the better recommendations
2. **Be specific** - "Fixed X by Y" is better than "Fixed bug"
3. **Capture decisions** - Future you will thank present you
4. **Review periodically** - Memory can inform planning
5. **Don't delete** - Append-only preserves history

## Memory File Location

```
.claude/memory/
├── README.md
├── learner_profile.json
├── progress_log.jsonl
├── decisions.jsonl
└── best_practices.md
```

See [.claude/memory/README.md](../.claude/memory/README.md) for implementation details.
